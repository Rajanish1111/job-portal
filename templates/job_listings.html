{% extends "base.html" %}

{% block title %}Job Listings{% endblock %}

{% block content %}
<h1 class="page-title slide-up">Available Job Listings</h1>

<section class="search-filter-section fade-in">
    <h2>Find Your Next Opportunity</h2>
    <form id="job-search-form">
        <div class="form-group">
            <label for="search-query">Keywords (Title, Skills, Description):</label>
            <input type="text" id="search-query" name="query" placeholder="e.g., Python, AI/ML, Embedded C">
        </div>
        <div class="form-group">
            <label for="filter-location">Location:</label>
            <input type="text" id="filter-location" name="location" placeholder="e.g., Bangalore, Remote">
        </div>
        <div class="form-group">
            <label for="filter-min-salary">Min Salary (k USD):</label>
            <input type="number" id="filter-min-salary" name="min_salary" placeholder="e.g., 80">
        </div>
        <div class="form-group">
            <label for="filter-max-salary">Max Salary (k USD):</label>
            <input type="number" id="filter-max-salary" name="max_salary" placeholder="e.g., 150">
        </div>
        <div class="form-group">
            <label for="filter-experience">Experience:</label>
            <input type="text" id="filter-experience" name="experience" placeholder="e.g., 3-5 Years">
        </div>
        <button type="submit" class="btn">Search & Filter</button>
        <button type="button" class="btn btn-secondary" id="reset-filters">Reset Filters</button>
    </form>
</section>

<div id="job-listings-container" class="card-grid">
    {% for job in jobs %}
    <div class="card job-card fade-in">
        <h3>{{ job.title }}</h3>
        <p class="job-description">{{ job.description | truncate(150) }}</p>
        <div class="job-meta">
            <span><strong>Location:</strong> {{ job.location }}</span>
            <span><strong>Salary:</strong> {{ job.salary }}</span>
            <span><strong>Experience:</strong> {{ job.experience }}</span>
        </div>
        <p class="job-skills"><strong>Skills:</strong> {{ job.skills }}</p>
        <a href="{{ url_for('apply_job', job_id=job.id) }}" class="btn apply-btn">Apply Now</a>
    </div>
    {% else %}
    <p>No jobs found. Try adjusting your search criteria.</p>
    {% endfor %}
</div>

{% endblock %}

{% block scripts %}
<script src="{{ url_for('static', filename='js/job_search.js') }}"></script>
{% endblock %}